@use "sass:map";
@use "sass:math";
@use "./variables.scss" as *;

// .d-#{display}
@mixin set-display-class($breakpoint){
	$displays: none, flex, inline-flex;
	@each $display in $displays {
		.d#{$breakpoint}-#{$display} {
			display: $display !important;
		}
	}
}

// flex utility classes like vuetify
@mixin set-flex-class($breakpoint) {
	$flex: (
		justify: (center, end, inherit, initial, left, normal, revert, right, space-around, space-between, space-evenly, start, stretch, unset),
		align-content: (baseline, center, end, inherit, initial, normal, revert, space-around, space-between, space-evenly, start, stretch, unset),
		align: (baseline, center, end, inherit, initial, normal, revert, start, stretch, unset),
		align-self: (auto, baseline, center, end, inherit, initial, normal, revert, self-end, self-start, start, stretch, unset),
	);

	@each $flex-item, $flex-values in $flex {
		@each $flex-value in $flex-values{
			$value: $flex-value;
			$item: $flex-item;
			@if ($value == start) { $value: flex-start; }
			@if ($value == end) { $value: flex-end; }
			@if ($item == justify) { $item: justify-content; }
			@if ($item == align) { $item: align-items; }

			.#{$flex-item}#{$breakpoint}-#{$flex-value} { #{$item}: $value !important; }
		}
	}

	$flex-directions: row, column, row-reverse, column-reverse;
	@each $flex-direction in $flex-directions {
		.flex#{$breakpoint}-#{$flex-direction} { flex-direction: $flex-direction !important; }
	}

	$flex-wraps: nowrap, wrap, wrap-reverse;
	@each $flex-wrap in $flex-wraps {
		.flex#{$breakpoint}-#{$flex-wrap} { flex-wrap: $flex-wrap !important; }
	}

	.flex#{$breakpoint}-grow-0{ flex-grow: 0 !important; }
	.flex#{$breakpoint}-grow-1{ flex-grow: 1 !important; }
	.flex#{$breakpoint}-shrink-0{ flex-shrink: 0 !important; }
	.flex#{$breakpoint}-shrink-1{ flex-shrink: 1 !important; }
}

// .col-#{breakpoint}-#{value},
// .col-offset-#{breakpoint}-#{value}
// .col-order-#{breakpoint}-#{value}
@mixin set-grid-class($breakpoint) {
	.col#{$breakpoint}-auto{
		flex-basis: 0;
		flex-grow: 1;
		max-width: 100%;
	}
	.col#{$breakpoint}-unset {
		flex-basis: fit-content;
	}

	@for $i from 1 through $default-grid-size {
		$size: 100% * math.div($i, $default-grid-size);
		.col#{$breakpoint}-#{$i} {
			flex-basis: $size;
			max-width: $size;
		}
		.col-offset#{$breakpoint}-#{$i} {
			margin-inline-start: $size;
		}
		.col-order#{$breakpoint}-#{$i} {
			order: $i;
		}
	}
}


$breakpoints: (
	null: null,
	-sm: sm-and-up,
	-md: md-and-up,
	-lg: lg-and-up,
	-xl: xl-only,
);
@each $breakpoint, $display in $breakpoints {
	@if ($breakpoint == null) {
		@include set-display-class($breakpoint);
		@include set-flex-class($breakpoint);
		@include set-grid-class($breakpoint);
	} @else {
		@media #{map.get($display-breakpoints, $display)} {
			@include set-display-class($breakpoint);
			@include set-flex-class($breakpoint);
			@include set-grid-class($breakpoint);
		}
	}
}